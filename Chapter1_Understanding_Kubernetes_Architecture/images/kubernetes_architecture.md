# Kubernetes Architecture Diagrams

This directory contains diagrams illustrating key Kubernetes architectural concepts discussed in Chapter 1.

## 1. Kubernetes High-Level Architecture

```
                   +--------------------+
                   |                    |
  +----------------+  Control Plane     |
  |                |                    |
  |                +--+---------------+-+
  |                   |               |
  |                   |               |
  |                   |               |
  |                   v               v
  |           +-------+---+    +------+----+
  |           |           |    |           |
  +---------->+   Node 1   |    |   Node 2  |
              |           |    |           |
              +-----------+    +-----------+
```

## 2. Control Plane Components

```
  +--------------------------------------------------------------+
  |                        Control Plane                         |
  |                                                              |
  |  +----------------+      +------------------------+          |
  |  |                |      |                        |          |
  |  | API Server     +<---->+   Controller Manager   |          |
  |  |                |      |                        |          |
  |  +--------+-------+      +------------------------+          |
  |           ^                                                  |
  |           |               +------------------------+         |
  |           |               |                        |         |
  |           +--------------->        Scheduler       |         |
  |           |               |                        |         |
  |           |               +------------------------+         |
  |           |                                                  |
  |  +--------v-------+                                          |
  |  |                |                                          |
  |  |      etcd      |                                          |
  |  |                |                                          |
  |  +----------------+                                          |
  +--------------------------------------------------------------+
```

## 3. Node Components

```
  +--------------------------------------------------------------+
  |                            Node                              |
  |                                                              |
  |  +----------------+      +------------------------+          |
  |  |                |      |                        |          |
  |  |    Kubelet     +<---->+    Container Runtime   |          |
  |  |                |      |                        |          |
  |  +--------+-------+      +------------------------+          |
  |           ^                                                  |
  |           |               +------------------------+         |
  |           |               |                        |         |
  |           +--------------->       Kube Proxy       |         |
  |                           |                        |         |
  |                           +------------------------+         |
  |                                                              |
  |  +------------------------------------------------------+    |
  |  |                        Pods                          |    |
  |  |                                                      |    |
  |  |  +------------------+     +---------------------+    |    |
  |  |  |                  |     |                     |    |    |
  |  |  |    Container 1   |     |     Container 2     |    |    |
  |  |  |                  |     |                     |    |    |
  |  |  +------------------+     +---------------------+    |    |
  |  +------------------------------------------------------+    |
  +--------------------------------------------------------------+
```

## 4. Kubernetes Pod Structure

```
  +--------------------------------------------------------------+
  |                             Pod                              |
  |                                                              |
  |  +------------------+     +------------------------+         |
  |  |                  |     |                        |         |
  |  | Main Container   |     |  Sidecar Container     |         |
  |  |                  |     |                        |         |
  |  +--------+---------+     +------------+-----------+         |
  |           |                            |                     |
  |           v                            v                     |
  |  +------------------+     +------------------------+         |
  |  |                  |     |                        |         |
  |  | Shared Volume    |     |    Shared Network      |         |
  |  |                  |     |    Namespace           |         |
  |  +------------------+     +------------------------+         |
  +--------------------------------------------------------------+
```

## 5. Container Runtime Interface

```
  +--------------------------------------------------------------+
  |                         Kubelet                              |
  |                                                              |
  |  +----------------------------------------------------------+|
  |  |                  CRI gRPC Interface                      ||
  |  +--+-----------------------+--------------------+----------+|
  +-----|------------------------|--------------------|-----------+
        |                        |                    |
        v                        v                    v
  +------------+          +------------+       +------------+
  |            |          |            |       |            |
  | containerd |          |   CRI-O    |       |  Docker +  |
  |            |          |            |       |cri-dockerd |
  +------+-----+          +------+-----+       +------+-----+
         |                       |                    |
         v                       v                    v
  +------------+          +------------+       +------------+
  |            |          |            |       |            |
  |    runc    |          |    runc    |       |    runc    |
  |            |          |            |       |            |
  +------------+          +------------+       +------------+
```

## 6. API Group Organization

```
  +--------------------------------------------------------------+
  |                     Kubernetes API                           |
  |                                                              |
  |  +------------------+     +------------------------+         |
  |  |                  |     |                        |         |
  |  | Core API (v1)    |     |  apps API group (v1)   |         |
  |  | - pods           |     |  - deployments         |         |
  |  | - services       |     |  - statefulsets        |         |
  |  | - configmaps     |     |  - daemonsets          |         |
  |  | - secrets        |     |  - replicasets         |         |
  |  +------------------+     +------------------------+         |
  |                                                              |
  |  +------------------+     +------------------------+         |
  |  |                  |     |                        |         |
  |  | networking.k8s.io|     |  storage.k8s.io        |         |
  |  | - ingress        |     |  - storageclasses      |         |
  |  | - networkpolicies|     |  - csidriver           |         |
  |  +------------------+     +------------------------+         |
  |                                                              |
  |  +------------------+     +------------------------+         |
  |  |                  |     |                        |         |
  |  | rbac.auth.k8s.io |     |  batch                 |         |
  |  | - roles          |     |  - jobs                |         |
  |  | - rolebindings   |     |  - cronjobs           |         |
  |  +------------------+     +------------------------+         |
  +--------------------------------------------------------------+
```

## 7. Kubernetes Design Patterns

### Sidecar Pattern
```
  +----------------------------------+
  |              Pod                 |
  |                                  |
  |  +-------------+  +------------+ |
  |  |             |  |            | |
  |  | Main App    |  | Sidecar    | |
  |  | Container   |  | Container  | |
  |  |             |  |            | |
  |  +------+------+  +------+-----+ |
  |         |                |       |
  |         v                v       |
  |  +---------------------------+   |
  |  |      Shared Volume        |   |
  |  +---------------------------+   |
  +----------------------------------+
```

### Ambassador Pattern
```
  +----------------------------------+
  |              Pod                 |
  |                                  |
  |  +-------------+  +------------+ |
  |  |             |  |            | |
  |  | Main App    |  | Ambassador | |
  |  | Container   |  | Container  | |
  |  |             |  |            | |
  |  +------+------+  +------+-----+ |
  |         |                |       |
  |         |                |       |
  |         |                v       |
  |         |         +------------+ |
  |         |         | External   | |
  |         +-------->| Service via| |
  |                   | Ambassador | |
  |                   +------------+ |
  +----------------------------------+
```

### Adapter Pattern
```
  +----------------------------------+
  |              Pod                 |
  |                                  |
  |  +-------------+  +------------+ |
  |  |             |  |            | |
  |  | Main App    |  | Adapter    | |
  |  | Container   |  | Container  | |
  |  |             |  |            | |
  |  +------+------+  +------+-----+ |
  |         |                ^       |
  |         v                |       |
  |  +-------------+  +------------+ |
  |  | Custom      |  | Standard   | |
  |  | Format      +->| Format     | |
  |  +-------------+  +------------+ |
  +----------------------------------+
```

## 8. Level-Triggered Architecture and Reconciliation

```
  +----------------------------------------------------------+
  |                                                          |
  |              Kubernetes Reconciliation Loop              |
  |                                                          |
  |  +--------------+                                        |
  |  |              |                                        |
  |  | Desired State|                                        |
  |  | (YAML/JSON)  |                                        |
  |  |              |                                        |
  |  +------+-------+                                        |
  |         |                                                |
  |         v                                                |
  |  +------+-------+        +---------------+               |
  |  |              |        |               |               |
  |  | API Server   +------->+ Controller    |               |
  |  |              |        |               |               |
  |  +--------------+        +-------+-------+               |
  |                                  |                       |
  |                                  |                       |
  |                                  v                       |
  |  +--------------+        +-------+-------+               |
  |  |              |        |               |               |
  |  | Current State|<-------+ Take Action   |               |
  |  |              |        |               |               |
  |  +--------------+        +---------------+               |
  |         |                                                |
  |         |                                                |
  |         +------------------------------------------------+
  |                          Compare                         |
  +----------------------------------------------------------+
```

## 9. Resource Relationships

```
+----------------+       +----------------+       +----------------+
|                |       |                |       |                |
|   Namespace    +------>+  Deployment    +------>+  ReplicaSet    |
|                |       |                |       |                |
+----------------+       +----------------+       +-------+--------+
                                                         |
                                                         |
                                                         v
+----------------+       +----------------+       +------+--------+
|                |       |                |       |               |
|  Secret        +<------+  Pod           |       | Service       |
|                |       |                |       |               |
+----------------+       +----------------+       +---------------+
                                |
                                |
                                v
                         +------+--------+
                         |               |
                         |  Volume       |
                         |               |
                         +---------------+
```
